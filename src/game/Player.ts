import { GAME_CONFIG } from '../utils/constants';
import { PlayerState } from '../utils/types';
import { Notebook as Robot } from 'lucide-react';

class Player {
  public x: number;
  public y: number;
  public width: number = 60;
  public height: number = 80;
  public velY: number = 0;
  private gravity: number = 0.6;
  private jumpForce: number = -15;
  private groundY: number;
  private state: PlayerState = PlayerState.RUNNING;
  private jumpCount: number = 0;
  private maxJumps: number = 2;
  private jumpCooldown: number = 0;
  private sprite: HTMLImageElement | null = null;
  private frameX: number = 0;
  private frameY: number = 0;
  private maxFrames: number = 8;
  private frameTimer: number = 0;
  private frameInterval: number = 100;

  constructor(canvasWidth: number, canvasHeight: number) {
    this.groundY = canvasHeight * 0.8 - this.height;
    this.x = canvasWidth * 0.2;
    this.y = this.groundY;

    // Create robot avatar
    this.createRobotSprite();
  }

  private createRobotSprite(): void {
    // In a full implementation, we would load a sprite sheet
    // For now, we'll use a simple colored rectangle
    this.sprite = new Image();
    this.sprite.src =
      'data:image/svg+xml;utf8,' +
      encodeURIComponent(`
    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
    viewBox="0 0 1893 2379" style="enable-background:new 0 0 1893 2379;" xml:space="preserve">
 <path style="fill:#27224F;" d="M824.779,2059.471c-0.26-7.944-2.788-15.113-6.818-20.403c-3.259-4.285-7.612-7.34-12.518-8.35
   c0.027-3.873,0.048-7.762,0.048-11.699c-0.005-78.148-5.629-168.415-29.822-247.347c-0.377-1.229-1.678-1.92-2.907-1.542
   c-1.228,0.377-1.919,1.678-1.542,2.907v0c23.974,78.177,29.622,168.064,29.617,245.982c0,3.843-0.021,7.638-0.047,11.42
   c-5.996,0.418-11.226,3.863-14.849,8.981c-3.772,5.316-5.988,12.413-5.993,20.183l0.021,1.307
   c0.259,7.943,2.788,15.111,6.818,20.402c3.305,4.346,7.734,7.428,12.725,8.393c-0.2,5.922-0.412,11.696-0.627,17.304
   c-45.961-43.755-104.96-58.609-155.253-60.838c-1.284-0.057-2.37,0.938-2.427,2.222c-0.057,1.284,0.938,2.371,2.222,2.427l0,0
   c50.685,2.248,109.97,17.425,155.219,62.359c-0.361,9.155-0.721,17.824-1.042,25.957c-22.524-12.409-131.641-70.949-174.2-64.492
   c-0.013,0.002-0.031,0.01-0.045,0.012c-15.121,2.353-55.841,40.899-72.163,85.708c-8.822,24.221-3.921,62.44,0,72.093
   c11.88,29.247,183.937-11.767,224.487-32.699c2.466-1.272,4.642-2.715,6.681-4.231c21.247-15.8,20.498-43.233,19.71-51.544
   c0.612-15.924,1.414-34.147,2.09-54.075c5.908-0.484,11.064-3.89,14.644-8.948c3.772-5.316,5.988-12.413,5.992-20.183
   L824.779,2059.471z"/>
 <path style="fill:#27224F;" d="M1334.727,2160.364c-16.322-44.809-57.042-83.356-72.163-85.708c-0.013-0.002-0.031-0.01-0.045-0.012
   c-42.56-6.458-151.677,52.083-174.201,64.492c-0.32-8.105-0.678-16.841-1.039-25.96c45.249-44.931,104.533-60.108,155.216-62.356
   c1.284-0.057,2.279-1.144,2.222-2.427c-0.057-1.284-1.143-2.279-2.427-2.222v0c-50.293,2.229-109.291,17.083-155.252,60.837
   c-0.201-5.244-0.402-10.613-0.591-16.132c-0.005-0.127-0.06-0.234-0.084-0.354c5.135-0.985,9.624-4.116,12.829-8.644
   c3.772-5.316,5.988-12.413,5.992-20.182l-0.021-1.306c-0.26-7.945-2.788-15.113-6.818-20.403c-3.411-4.485-8.017-7.639-13.205-8.491
   c-0.031-4.127-0.055-8.275-0.055-12.475c-0.005-77.918,5.643-167.807,29.618-245.983c0.376-1.229-0.314-2.531-1.543-2.907
   c-1.229-0.377-2.53,0.314-2.907,1.543v0c-24.193,78.932-29.818,169.199-29.823,247.348c0,4.193,0.024,8.332,0.055,12.452
   c-5.698,0.631-10.68,3.948-14.161,8.866c-3.772,5.317-5.988,12.413-5.992,20.183l0.021,1.307c0.259,7.944,2.787,15.111,6.818,20.402
   c3.725,4.897,8.873,8.196,14.649,8.651c-0.002,0.053-0.027,0.1-0.026,0.154v0c0.252,7.336,0.519,14.34,0.788,21.179
   c0,0.003-0.001,0.004,0,0.007c0.448,11.395,0.886,22.017,1.262,31.805c-0.786,8.363-1.498,35.727,19.714,51.501
   c2.039,1.516,4.216,2.959,6.681,4.231c40.551,20.933,212.606,61.946,224.487,32.699
   C1338.648,2222.804,1343.549,2184.585,1334.727,2160.364z"/>
 <path style="fill:#C5DCEA;" d="M1328.066,356.511c-5.061-43.709-13.218-81.892-25.154-108.074
   c-59.959-131.518-584.019-168.16-674.642,0c-13.129,24.361-22.599,63.154-28.616,108.711
   c-14.172,107.292-9.147,252.157,12.624,334.975c4.594,17.478,9.929,32.214,15.992,43.224
   c23.694,43.03,94.331,78.904,168.437,103.914c-16.657,13.822-33.268,30.187-48.705,48.404
   c-45.101,53.222-79.987,121.897-75.992,186.974c1.523,24.809,8.618,49.098,23.06,71.794c15.711,24.688,43.866,43.632,79.042,57.335
   c93.812,36.544,237.679,35.681,329.702,6.225c39.683-12.702,69.741-30.706,81.946-53.332c14.146-26.221,20.41-53.243,20.981-80.136
   c1.467-69.067-35.167-137.23-76.284-188.775c-10.714-13.431-21.713-25.763-32.426-36.652
   c85.943-30.712,182.885-81.211,204.88-115.75c5.065-7.954,9.744-22.114,13.872-40.749
   C1333.524,619.023,1341.131,469.343,1328.066,356.511z"/>
 <path style="fill:#DCEBF5;" d="M1089.995,858.247c-41.925,48.031-92.526,77.128-150.453,77.128
   c-48.481,0-103.839-63.248-125.418-90.467c-0.234-0.073-0.468-0.145-0.702-0.218c-75.295,57.91-150.656,171.674-92.045,258.032
   c67.523,99.487,392.21,87.839,437.824,8.556C1210.045,1022.906,1148.216,918.983,1089.995,858.247z"/>
 <path style="fill:#27224F;" d="M491.52,1395.787c-7.511,27.69-18.944,77.796-12.96,80.86c6.002,3.073,9.784-6.014,11.112-9.976
   c-1.877,6.234-7.829,27.437-2.598,29.514c6.137,2.437,14.906-15.443,14.906-15.443s-7.683,22.936-1.549,24.147
   c6.134,1.21,14.205-20.27,14.205-20.27s-4.64,14.038,2.109,15.86c6.749,1.822,38.288-74.286,38.288-74.286
   s25.211,28.754,32.541,17.7c3.616-5.454-4.922-21.442-15.304-37.05C551.763,1410.164,507.043,1403.203,491.52,1395.787z"/>
 <path style="fill:#27224F;" d="M1311.323,1390.945c-11.18,16.433-20.967,33.991-17.14,39.763c7.33,11.055,32.541-17.7,32.541-17.7
   s31.54,76.109,38.289,74.286c6.749-1.823,2.109-15.86,2.109-15.86s8.07,21.48,14.205,20.269c6.135-1.211-1.549-24.146-1.549-24.146
   s8.77,17.88,14.907,15.443c5.231-2.077-0.721-23.279-2.598-29.513c1.328,3.962,5.109,13.049,11.112,9.975
   c6.213-3.181-6.352-57.087-13.806-83.945C1374.538,1386.624,1332.838,1393.318,1311.323,1390.945z"/>
 <path style="fill:#27224F;" d="M1096.485,1660.721c4.231,24.132,8.059,48.335,11.418,72.604c0.116,0.839,0.234,1.68,0.346,2.521
   c0.393,3.029,0.793,6.057,1.177,9.087c0.621,4.894,1.2,9.793,1.78,14.691c0.008-0.002,0.059-0.021,0.059-0.021l68.767-8.26
   c-6.716-55.389-15.83-110.504-26.759-165.176c-17.474,10.778-40.037,19.684-65.783,26.578
   C1090.632,1628.71,1093.675,1644.693,1096.485,1660.721z"/>
 <path style="fill:#C5DCEA;" d="M1100.511,2060.538c-0.222-7.041-2.496-13.32-5.867-17.73c-3.389-4.426-7.736-6.914-12.291-6.912
   l-0.404,0.008c-4.521,0.146-8.674,2.708-11.832,7.13c-3.138,4.406-5.136,10.608-5.131,17.486l0.019,1.158
   c0.221,7.04,2.495,13.318,5.866,17.728c3.389,4.425,7.736,6.914,12.291,6.912l0.404-0.007c4.521-0.146,8.674-2.709,11.832-7.131
   c3.138-4.406,5.136-10.608,5.131-17.486L1100.511,2060.538z"/>
 <path style="fill:#C5DCEA;" d="M1232.68,1833.061c-18.123-55.735-50.995-81.915-50.995-81.915l-1.654,0.198l-68.767,8.26
   c0,0-0.05,0.018-0.059,0.021c-0.626,0.206-25.316,8.639-43.067,66.928c-12.943,42.504-36.808,289.415-36.808,289.415
   c-1.661,33.911,43.326,79.557,72.16,79.557h0.068c-21.212-15.774-20.5-43.138-19.714-51.501c-0.375-9.788-0.814-20.41-1.262-31.805
   c-0.001-0.002,0-0.004,0-0.007c-0.269-6.838-0.536-13.843-0.788-21.179v0c-0.002-0.055,0.024-0.101,0.026-0.154
   c-5.777-0.455-10.925-3.754-14.649-8.651c-4.031-5.292-6.559-12.459-6.818-20.402l-0.021-1.307
   c0.005-7.77,2.221-14.867,5.992-20.183c3.481-4.918,8.463-8.234,14.161-8.866c-0.031-4.12-0.055-8.259-0.055-12.452
   c0.005-78.149,5.629-168.416,29.823-247.348v0c0.376-1.229,1.678-1.92,2.907-1.543c1.228,0.376,1.919,1.678,1.543,2.907
   c-23.975,78.177-29.622,168.065-29.618,245.983c0,4.201,0.023,8.348,0.055,12.475c5.188,0.852,9.793,4.006,13.205,8.491
   c4.031,5.291,6.559,12.458,6.818,20.403l0.021,1.306c-0.005,7.77-2.221,14.866-5.992,20.182c-3.205,4.527-7.694,7.658-12.829,8.644
   c0.023,0.121,0.079,0.228,0.084,0.354c0.189,5.519,0.389,10.887,0.591,16.132c45.961-43.755,104.959-58.608,155.252-60.837v0
   c1.284-0.057,2.37,0.938,2.427,2.222c0.057,1.284-0.937,2.371-2.222,2.427c-50.683,2.248-109.967,17.425-155.216,62.356
   c0.36,9.119,0.719,17.855,1.039,25.96c22.524-12.408,131.64-70.949,174.201-64.492c0.014,0.002,0.031,0.01,0.045,0.012
   C1258.452,2002.848,1249.424,1884.559,1232.68,1833.061z"/>
 <path style="fill:#DCEBF5;" d="M1226.002,1834.882c-9.714-41.281-46.138-73.456-46.138-73.456l-55.244,10.928
   c0,0-9.713,75.884-12.142,135.985c-1.944,48.108,4.25,157.233,4.25,157.233s24.283-15.177,52.208-24.283
   c27.926-9.106,77.706-7.892,77.706-7.892S1235.715,1876.163,1226.002,1834.882z"/>
 <path style="fill:#FFFFFF;" d="M1200.724,1905.91c4.076,49.958,13.463,116.559,21.678,116.559c8.214,0,2.386-98.347-1.163-148.148
   c-3.563-49.997-34.068-105.701-45.017-101.967C1168.447,1775.004,1194.434,1828.812,1200.724,1905.91z"/>
 <path style="fill:#27224F;" d="M705.943,1751.351l68.715,8.254c0,0,0.105,0.038,0.183,0.066c0.912-7.797,1.769-15.598,2.773-23.386
   c0.001-0.002,0.001-0.004,0.001-0.006c0.139-0.987,0.27-1.977,0.404-2.953c0.392-2.829,0.79-5.657,1.194-8.484
   c0.912-6.381,1.856-12.757,2.831-19.128c1.836-12.003,3.783-23.99,5.829-35.96c3.402-19.898,7.125-39.74,11.04-59.543
   c-24.682-7.359-46.899-16.888-65.216-28.706C722.421,1637.778,712.908,1694.385,705.943,1751.351z"/>
 <path style="fill:#C5DCEA;" d="M820.127,2059.62c-0.222-7.042-2.495-13.32-5.866-17.73c-3.39-4.426-7.736-6.914-12.291-6.912
   l-0.399,0.007h-0.004c-4.521,0.145-8.673,2.708-11.831,7.13c-3.138,4.406-5.136,10.608-5.131,17.486l0.018,1.157
   c0.221,7.041,2.495,13.319,5.866,17.729c3.17,4.139,7.187,6.496,11.418,6.794c0.03,0,0.056-0.016,0.086-0.015
   c0.092,0.003,0.169,0.048,0.258,0.061c0.178,0.008,0.35,0.072,0.528,0.072l0.405-0.007c4.52-0.146,8.673-2.709,11.831-7.13
   c3.138-4.406,5.136-10.608,5.131-17.487L820.127,2059.62z"/>
 <path style="fill:#C5DCEA;" d="M817.783,1826.553c-17.26-56.677-41.059-66.208-42.942-66.882c-0.078-0.028-0.183-0.066-0.183-0.066
   l-68.715-8.254l-1.706-0.205c0,0-32.873,26.18-50.995,81.915c-16.744,51.498-25.772,169.787-29.885,241.594
   c0.014-0.002,0.032-0.01,0.045-0.012c42.56-6.458,151.676,52.083,174.2,64.492c0.321-8.133,0.681-16.802,1.042-25.957
   c-45.249-44.934-104.534-60.111-155.219-62.359l0,0c-1.284-0.057-2.279-1.144-2.222-2.427c0.057-1.284,1.144-2.279,2.427-2.222
   c50.294,2.229,109.292,17.083,155.253,60.838c0.215-5.608,0.427-11.382,0.627-17.304c-4.99-0.965-9.42-4.047-12.725-8.393
   c-4.031-5.291-6.559-12.459-6.818-20.402l-0.021-1.307c0.004-7.77,2.221-14.867,5.993-20.183c3.623-5.117,8.853-8.563,14.849-8.981
   c0.026-3.782,0.047-7.578,0.047-11.42c0.004-77.918-5.643-167.806-29.617-245.982v0c-0.377-1.229,0.314-2.53,1.542-2.907
   c1.229-0.378,2.531,0.313,2.907,1.542c24.193,78.932,29.817,169.199,29.822,247.347c0,3.937-0.021,7.826-0.048,11.699
   c4.906,1.011,9.259,4.065,12.518,8.35c4.03,5.291,6.559,12.459,6.818,20.403l0.021,1.306c-0.004,7.77-2.22,14.867-5.992,20.183
   c-3.581,5.058-8.736,8.463-14.644,8.948c-0.676,19.927-1.478,38.151-2.09,54.075c0.788,8.312,1.538,35.745-19.71,51.544h0.068
   c28.834,0,73.822-45.647,72.16-79.557C854.591,2115.969,830.727,1869.057,817.783,1826.553z"/>
 <path style="fill:#DCEBF5;" d="M773.444,1908.339c-2.428-60.1-12.141-135.985-12.141-135.985l-55.244-10.928
   c0,0-36.424,32.175-46.138,73.456c-9.713,41.281-20.64,198.514-20.64,198.514s49.78-1.214,77.705,7.892
   c27.925,9.106,52.209,24.283,52.209,24.283S775.388,1956.446,773.444,1908.339z"/>
 <path style="fill:#FFFFFF;" d="M709.701,1772.354c-10.949-3.734-41.454,51.97-45.017,101.967
   c-3.549,49.801-9.377,148.148-1.163,148.148c8.214,0,17.601-66.6,21.677-116.559
   C691.489,1828.812,717.476,1775.004,709.701,1772.354z"/>
 <path style="fill:#FFFFFF;" d="M593.223,2127.005c-22.288,21.537-31.358,54.811-23.39,84.715c1.567,5.88,8.368,10.051,14.313,8.127
   c6.04-1.955,9.806-8.011,8.127-14.313c-0.381-1.431-0.739-2.867-1.039-4.316c-0.187-0.906-0.337-1.816-0.506-2.725
   c-0.027-0.144-0.04-0.204-0.057-0.289c-0.365-3.088-0.531-6.2-0.498-9.307c0.016-1.479,0.076-2.957,0.178-4.43
   c0.051-0.739,0.125-1.475,0.186-2.211c0.026-0.309,0.039-0.486,0.053-0.676c0.006-0.039,0.007-0.039,0.014-0.085
   c0.466-3.11,1.124-6.192,1.967-9.223c0.763-2.746,1.693-5.448,2.757-8.093c0.14-0.318,0.349-0.796,0.485-1.089
   c0.313-0.671,0.634-1.336,0.966-1.996c0.663-1.322,1.365-2.623,2.105-3.904c0.832-1.439,1.71-2.852,2.637-4.232
   c0.412-0.613,0.841-1.214,1.263-1.82c0.15-0.216,0.294-0.416,0.405-0.57c1.983-2.525,4.181-4.877,6.489-7.107
   c4.385-4.237,4.576-12.254,0-16.455C604.968,2122.681,597.902,2122.485,593.223,2127.005z"/>
 <path style="fill:#FFFFFF;" d="M1283.249,2155.122c0.727,1.411,1.394,2.847,2.071,4.282c0.217,0.46,0.317,0.657,0.367,0.746
   c0.043,0.13,0.125,0.362,0.311,0.856c1.124,2.972,2.172,5.957,3.034,9.016c0.86,3.053,1.571,6.151,2.119,9.275
   c0.005,0.027,0.267,1.722,0.346,2.144c0.173,1.396,0.313,2.799,0.417,4.2c0.233,3.162,0.304,6.335,0.209,9.504
   c-0.047,1.584-0.136,3.168-0.266,4.747c-0.034,0.413-0.566,4.85-0.274,2.813c-0.863,5.997,1.473,12.798,8.127,14.313
   c5.505,1.254,13.386-1.684,14.313-8.127c4.407-30.619-3.877-60.813-23.66-84.674c-3.901-4.705-12.474-4.336-16.456,0
   c-4.591,5.002-4.16,11.437,0,16.455C1276.571,2143.884,1280.532,2149.85,1283.249,2155.122z"/>
 <path style="fill:#C5DCEA;" d="M1104.559,1294.471c-0.111,0-0.253-0.001-0.366-0.001c0.218,1.312,0.366,2.631,0.366,3.963
   c0,34.634-74.671,62.711-166.781,62.711s-166.78-28.077-166.78-62.711c0-1.341,0.15-2.668,0.371-3.988
   c-0.117,0.01-0.254,0.017-0.371,0.026c-70.554,5.72-149.232,134.742-75.929,249.933c9.069,14.252,22.313,26.575,38.627,37.1
   c18.317,11.818,40.534,21.347,65.216,28.706c87.145,25.985,204.791,24.974,288.577,2.536c25.746-6.894,48.309-15.799,65.783-26.578
   c14.903-9.193,26.123-19.737,32.488-31.537C1254.386,1427.415,1173.039,1294.471,1104.559,1294.471z"/>
 <path style="fill:#DCEBF5;" d="M754.157,1357.182c-16.998,15.576-37.64,139.537-1.214,196.767
   c64.561,101.435,328.147,54.285,356.96,18.213c49.055-61.413,38.205-177.266,0-229.475c-11.613-15.87-102.901,60.022-169.609,59.494
   C854.565,1401.501,779.982,1333.517,754.157,1357.182z"/>
 <path style="fill:#27224F;" d="M1095.941,1235.722c5.56-6.252,8.618-12.936,8.618-19.892c0-1.969-0.272-3.914-0.745-5.836
   c-92.024,29.455-235.89,30.318-329.702-6.225c-2.024,3.904-3.114,7.934-3.114,12.062c0,6.956,3.057,13.64,8.618,19.892
   c-5.56,6.253-8.618,12.936-8.618,19.893c0,7.519,3.528,14.728,9.982,21.408c-5.303,5.49-8.595,11.339-9.612,17.422
   c-0.22,1.32-0.371,2.647-0.371,3.988c0,34.634,74.67,62.711,166.78,62.711s166.781-28.077,166.781-62.711
   c0-1.332-0.148-2.651-0.366-3.963c-1.011-6.091-4.306-11.949-9.617-17.447c6.454-6.681,9.983-13.889,9.983-21.408
   C1104.559,1248.658,1101.501,1241.975,1095.941,1235.722z"/>
 <path style="fill:#27224F;" d="M748.001,887.666c-29.894-1.309-62.487,2.395-76.623,16.763c-3.975,4.04-7.282,13.467-10.011,25.442
   c-33.612,26.26-59.915,61.71-80.13,98.946c-26.059,48-44.341,101.105-52.498,155.134c-0.89,5.898-1.666,11.802-2.375,17.71
   c5.23,1.622,10.663,10.527,32.709,16.549c23.297,6.365,29.621,0.467,35.193,1.692c0.43-5.22,1.931-18.208,2.027-18.83
   c0.415-2.687,0.842-5.372,1.307-8.05c1.101-6.334,2.341-12.644,3.716-18.924c2.753-12.576,6.042-25.032,9.84-37.333
   c3.661-11.858,7.793-23.572,12.395-35.099c0.484-1.214,0.983-2.424,1.476-3.634c1.067-2.44,2.126-4.884,3.229-7.309
   c2.564-5.64,5.248-11.228,8.054-16.751c5.237-10.308,10.929-20.385,17.057-30.192c3.797,10.497,10.893,22.451,18.643,30.862
   C668.015,1009.563,702.901,940.888,748.001,887.666z"/>
 <path style="fill:#C5DCEA;" d="M595.597,1220.327c-0.444-0.199-0.886-0.328-1.331-0.426c-5.573-1.225-11.896,4.673-35.193-1.692
   c-22.046-6.022-27.478-14.927-32.709-16.549c-0.542-0.168-1.081-0.284-1.636-0.284c-15.936,0-39.079,61.912-42.356,106.501
   c-3.082,41.931,1.647,79.291,3.947,84c0.625,1.281,2.463,2.603,5.201,3.91c15.524,7.416,60.244,14.377,80.751,11.055
   c5.188-0.841,8.856-2.326,10.074-4.644c6.878-13.096,13.617-25.768,23.428-73.166
   C612.515,1296.457,616.366,1229.629,595.597,1220.327z"/>
 <path style="fill:#FFFFFF;" d="M500.631,1366.225c5.855,0,12.206-5.34,11.636-11.635c-3.7-40.857,4.575-82.463,21.868-119.549
   c2.654-5.691,1.6-12.542-4.174-15.919c-5.037-2.947-13.252-1.548-15.92,4.174c-18.987,40.719-29.121,86.286-25.045,131.295
   C489.562,1360.849,493.937,1366.225,500.631,1366.225z"/>
 <path style="fill:#27224F;" d="M583.726,1383.546c-4.402,0.266-8.718,0.357-12.987,0.388c7.887-28.751,19.574-75.225,19.586-115.199
   c-0.003-14.69-1.579-28.515-5.597-40.317c-0.415-1.217-1.737-1.866-2.954-1.452c-1.217,0.415-1.866,1.737-1.451,2.954
   c3.786,11.095,5.351,24.46,5.348,38.814c0.011,39.679-11.899,86.711-19.762,115.218c-31.588-0.371-58.474-6.574-71.504-11.275
   c-1.21-0.436-2.543,0.191-2.978,1.401c-0.436,1.209,0.192,2.542,1.401,2.978l0,0c14.075,5.06,42.571,11.577,76.098,11.586
   c4.929,0,9.967-0.142,15.081-0.451c1.283-0.077,2.26-1.18,2.182-2.463C586.111,1384.445,585.008,1383.468,583.726,1383.546z"/>
 <path style="fill:#27224F;" d="M1336.116,1116.161c-16.522-52.66-41.269-102.341-75.766-145.5
   c-12.092-15.128-25.864-28.929-41.138-40.834c-2.727-11.955-6.032-21.363-10.002-25.398c-14.47-14.708-48.293-18.259-78.752-16.679
   c41.117,51.545,77.751,119.708,76.284,188.775c8.428-8.414,16.341-21.359,20.446-32.658c4.497,7.196,8.833,14.492,12.845,21.97
   c5.622,10.481,10.671,21.22,15.488,32.09c0.375,0.919,0.753,1.837,1.124,2.759c1.182,2.943,2.336,5.897,3.457,8.864
   c2.258,5.972,4.39,11.99,6.399,18.049c7.978,24.065,14.024,48.792,17.867,73.856c0.042,0.276,0.205,1.074,0.434,2.884
   c0.168-0.084,0.324-0.197,0.496-0.274c5.999-2.687,11.368,4.755,36.524-2.118c19.226-5.252,25.809-12.696,30.65-15.596
   C1348.768,1162.489,1343.255,1138.915,1336.116,1116.161z"/>
 <path style="fill:#C5DCEA;" d="M1052.624,971.27c-4.405-5.592-15.525-7.263-23.512-3.641l-0.149,0.068
   c-28.709,12.996-61.83,21.145-97.408,19.932c-20.119-0.686-40.16-3.775-59.013-8.25c-7.377-1.751-14.576-3.781-21.492-6.125
   c-11.922-4.041-26.707-0.837-32.874,6.84c-30.654,38.152-48.823,87.427-21.299,127.475c43.668,63.539,253.645,56.101,283.146,5.465
   C1107.817,1065.323,1083.542,1010.517,1052.624,971.27z"/>
 <path style="fill:#27224F;" d="M1033.655,984c-3.581-4.789-12.619-6.22-19.112-3.119l-0.122,0.059
   c-23.339,11.13-50.262,18.108-79.184,17.07c-16.356-0.587-32.647-3.232-47.972-7.065c-5.998-1.5-11.849-3.238-17.471-5.246
   c-9.692-3.461-21.711-0.717-26.725,5.857c-24.92,32.675-39.688,74.875-17.314,109.173c35.498,54.417,206.194,48.046,230.175,4.68
   C1078.523,1064.549,1058.788,1017.612,1033.655,984z"/>
 <path style="fill:#27224F;" d="M984.051,877.936c-35.229,0-102.61-11.954-169.927-33.027
   c21.579,27.218,76.937,90.467,125.418,90.467c57.928,0,108.528-29.098,150.453-77.128c1.742-1.996,3.442-4.08,5.154-6.14
   C1051.042,867.685,1010.091,877.936,984.051,877.936z"/>
 <path style="fill:#C5DCEA;" d="M1398.521,1291.616c-3.276-44.588-26.42-106.501-42.356-106.501c-1.241,0-2.41,0.468-3.695,1.237
   c-4.84,2.9-11.424,10.344-30.65,15.596c-25.156,6.872-30.525-0.569-36.524,2.118c-0.172,0.077-0.328,0.19-0.496,0.274
   c-0.02,0.01-0.039,0.022-0.059,0.032c-0.013,0.007-0.026,0.015-0.039,0.021c-20.084,10.326-16.259,76.124-9.583,108.377
   c9.811,47.399,16.55,60.07,23.428,73.167c1.42,2.702,6.156,4.277,12.775,5.008c21.515,2.374,63.214-4.321,78.07-11.429
   c2.726-1.304,4.557-2.622,5.182-3.9C1396.875,1370.907,1401.603,1333.547,1398.521,1291.616z"/>
 <path style="fill:#FFFFFF;" d="M1368.627,1338.328c-0.568,6.267,5.755,11.636,11.636,11.636c6.766,0,11.066-5.351,11.635-11.636
   c4.076-45.009-6.058-90.575-25.045-131.294c-2.656-5.695-10.854-7.137-15.92-4.174c-5.839,3.415-6.84,10.203-4.174,15.92
   C1364.052,1255.865,1372.327,1297.47,1368.627,1338.328z"/>
 <path style="fill:#27224F;" d="M1318.92,1367.726c-1.294,0-2.648-0.098-3.957-0.118c-7.864-28.515-19.752-75.495-19.74-115.136
   c-0.003-14.355,1.562-27.719,5.348-38.814c0.415-1.217-0.235-2.539-1.452-2.953c-1.217-0.415-2.539,0.235-2.953,1.452
   c-4.02,11.801-5.594,25.626-5.598,40.316c0.012,39.877,11.643,86.223,19.529,114.99c-2-0.07-3.952-0.056-5.978-0.178
   c-1.283-0.078-2.386,0.9-2.463,2.182c-0.078,1.283,0.9,2.386,2.183,2.464c2.911,0.175,5.73,0.184,8.586,0.256
   c0.443,0.164,0.925,0.235,1.414,0.099c0.04-0.011,0.068-0.041,0.107-0.054c1.648,0.032,3.348,0.149,4.974,0.149
   c33.527-0.009,62.023-6.525,76.098-11.586c1.209-0.436,1.836-1.769,1.401-2.978c-0.436-1.209-1.769-1.836-2.978-1.401v0
   C1379.996,1361.266,1351.814,1367.735,1318.92,1367.726z"/>
 <path style="fill:#27224F;" d="M804.94,2079.278c1.279,0.124,2.416-0.813,2.54-2.092c0.124-1.279-0.813-2.416-2.091-2.54
   c-1.439-0.14-2.79-0.816-4.057-1.936c-1.258-1.113-2.373-2.657-3.198-4.271c-1.688-3.286-2.526-7.006-2.525-10.748
   c-0.003-5.443,1.779-10.902,5.141-15.086c0.804-1.002,0.643-2.467-0.359-3.271c-1.002-0.804-2.467-0.644-3.271,0.359v-0.001
   c-4.085,5.099-6.162,11.556-6.165,17.998c0.001,4.433,0.988,8.875,3.039,12.874c1.044,2.029,2.443,4.018,4.249,5.625
   C800.039,2077.79,802.303,2079.023,804.94,2079.278z"/>
 <path style="fill:#27224F;" d="M1087.864,2078.104c0.124-1.279-0.812-2.416-2.091-2.54c-1.439-0.14-2.79-0.816-4.057-1.936
   c-1.259-1.113-2.373-2.656-3.199-4.27c-1.688-3.286-2.526-7.006-2.525-10.749c-0.003-5.444,1.779-10.902,5.141-15.086
   c0.804-1.003,0.643-2.467-0.359-3.271c-1.003-0.804-2.467-0.644-3.271,0.359l0-0.001c-4.085,5.099-6.162,11.555-6.165,17.998
   c0.001,4.433,0.988,8.875,3.039,12.874c1.044,2.029,2.443,4.017,4.249,5.625c1.798,1.6,4.062,2.833,6.698,3.088
   C1086.603,2080.319,1087.74,2079.383,1087.864,2078.104z"/>
 <path style="fill:#1A1333;" d="M997.657,1022.604H880.838c-9.571,0-17.33,7.759-17.33,17.329v43.554
   c0,9.571,7.759,17.33,17.33,17.33h116.819c9.571,0,17.33-7.759,17.33-17.33v-43.554
   C1014.987,1030.363,1007.229,1022.604,997.657,1022.604z"/>
 <path style="fill:#27224F;" d="M990.754,1027.684H881.784c-6.142,0-11.121,4.979-11.121,11.121v40.297
   c0,6.142,4.979,11.121,11.121,11.121h108.971c6.142,0,11.121-4.979,11.121-11.121v-40.297
   C1001.875,1032.663,996.896,1027.684,990.754,1027.684z"/>
 <path style="fill:#98C21D;" d="M893.409,1034.861h-7.689c-4.388,0-7.946,3.557-7.946,7.945v30.244c0,4.389,3.557,7.945,7.946,7.945
   h7.689c4.389,0,7.946-3.557,7.946-7.945v-30.244C901.355,1038.418,897.797,1034.861,893.409,1034.861z"/>
 <path style="fill:#98C21D;" d="M923.793,1034.861h-7.689c-4.388,0-7.945,3.557-7.945,7.945v30.244c0,4.389,3.557,7.945,7.945,7.945
   h7.689c4.389,0,7.946-3.557,7.946-7.945v-30.244C931.739,1038.418,928.181,1034.861,923.793,1034.861z"/>
 <path style="fill:#98C21D;" d="M954.178,1034.861h-7.69c-4.388,0-7.945,3.557-7.945,7.945v30.244c0,4.389,3.557,7.945,7.945,7.945
   h7.69c4.388,0,7.945-3.557,7.945-7.945v-30.244C962.123,1038.418,958.566,1034.861,954.178,1034.861z"/>
 <path style="fill:#98C21D;" d="M984.562,1034.861h-7.69c-4.388,0-7.945,3.557-7.945,7.945v30.244c0,4.389,3.557,7.945,7.945,7.945
   h7.69c4.388,0,7.945-3.557,7.945-7.945v-30.244C992.507,1038.418,988.95,1034.861,984.562,1034.861z"/>
 <path style="fill:#FFFFFF;" d="M892.165,1040.823c-1.136-1.136-3-1.992-4.632-1.918c-3.295,0.148-6.867,2.894-6.55,6.55
   c0.573,6.599,0.689,13.226,0.348,19.841c-0.177,3.427,3.138,6.702,6.55,6.55c3.699-0.166,6.361-2.879,6.55-6.55
   c0.341-6.615,0.225-13.242-0.348-19.841C893.93,1043.687,893.455,1042.114,892.165,1040.823z"/>
 <path style="fill:#FFFFFF;" d="M921.804,1040.858c-1.136-1.136-3-1.991-4.632-1.918c-1.694,0.076-3.451,0.633-4.631,1.918
   c-1.13,1.231-2.035,2.905-1.919,4.632c0.4,5.927,0.801,11.854,1.201,17.781c0.118,1.749,0.651,3.364,1.919,4.632
   c1.136,1.136,3,1.992,4.632,1.918c1.694-0.075,3.451-0.632,4.631-1.918c1.13-1.231,2.035-2.904,1.919-4.632
   c-0.401-5.927-0.801-11.854-1.201-17.781C923.604,1043.741,923.072,1042.126,921.804,1040.858z"/>
 <path style="fill:#FFFFFF;" d="M948.781,1038.245c-3.549,0.159-6.55,2.878-6.55,6.55c0,6.38,0,12.759,0,19.138
   c0,3.426,3.013,6.709,6.55,6.55c3.549-0.159,6.55-2.878,6.55-6.55c0-6.379,0-12.758,0-19.138
   C955.331,1041.368,952.318,1038.086,948.781,1038.245z"/>
 <path style="fill:#FFFFFF;" d="M983.476,1040.847c-1.136-1.136-3-1.992-4.631-1.919c-1.694,0.076-3.451,0.632-4.632,1.919
   c-1.137,1.238-2.02,2.897-1.919,4.632c0.333,5.702,0.666,11.405,0.999,17.108c0.102,1.74,0.662,3.374,1.919,4.631
   c1.136,1.136,3,1.992,4.632,1.918c1.694-0.076,3.451-0.632,4.631-1.918c1.137-1.238,2.02-2.897,1.919-4.631
   c-0.333-5.703-0.666-11.406-0.999-17.108C985.293,1043.739,984.733,1042.104,983.476,1040.847z"/>
 <path style="fill:#27224F;" d="M1379.998,403.061v-1.782c0-24.921-20.39-45.312-45.312-45.312c-2.254,0-4.453,0.221-6.621,0.544
   c13.065,112.832,5.458,262.512-11.282,338.087c5.501,2.387,11.551,3.725,17.903,3.725c24.922,0,45.312-20.391,45.312-45.312v-18.564
   c19.559-1.067,35.243-17.351,35.243-37.165V440.226C1415.241,420.412,1399.558,404.128,1379.998,403.061z"/>
 <path style="fill:#27224F;" d="M599.653,357.149c-3.253-0.748-6.623-1.181-10.094-1.181c-24.922,0-45.312,20.391-45.312,45.312
   v1.782c-19.559,1.067-35.243,17.351-35.243,37.165v157.058c0,19.814,15.684,36.098,35.243,37.165v18.564
   c0,24.921,20.391,45.312,45.312,45.312c8.274,0,16.023-2.286,22.718-6.2C590.506,609.306,585.481,464.441,599.653,357.149z"/>
 <path style="fill:#DCEBF5;" d="M672.96,726.709c63.139,54.449,194.719,89.041,244.043,89.041c37.31,0,114.532-31.062,172.895-65.466
   C937.856,758.32,738.942,750.693,672.96,726.709z"/>
 <path style="fill:#DCEBF5;" d="M1161.149,269.8c-45.91-114.063-447.174-145.841-516.563,0c-12.21,25.662-20.288,69.783-24.51,120.47
   c8.573-29.626,20.979-52.084,37.541-61.605c56.123-32.259,352.735-36.903,514.41-21.23
   C1168.985,293.035,1165.377,280.304,1161.149,269.8z"/>
 <path style="fill:#FFFFFF;" d="M767.17,227.827c46.152-6.674,93.944-10.144,140.974-9.129c48.216,1.041,98.152,6.344,143.089,24.939
   c21.911,9.067,42.213,21.972,57.999,39.799c10.313,11.646,27.322-5.467,17.059-17.059c-32.025-36.165-80.262-53.773-126.546-62.686
   c-52.271-10.066-106.133-10.936-159.12-7.576c-26.731,1.695-53.362,4.616-79.867,8.449c-6.454,0.933-9.996,9.12-8.425,14.838
   C754.235,226.33,760.697,228.763,767.17,227.827z"/>
 <path style="fill:#659FBA;" d="M1273.747,328.665c-11.507-9.026-49.628-16.18-101.719-21.23
   c-161.675-15.673-458.287-11.029-514.41,21.23c-16.562,9.521-28.968,31.979-37.541,61.605
   c-29.837,103.106-13.114,293.259,37.541,329.008c3.733,2.634,8.943,5.106,15.342,7.432c65.982,23.984,264.896,31.611,416.937,23.575
   c90.809-4.8,164.891-15.179,183.849-31.007C1327.527,674.379,1320.969,365.706,1273.747,328.665z"/>
 <path style="fill:#27224F;" d="M1232.58,341.441c-43.163-30.857-495.343-35.533-563.17,0c-67.827,35.533-59.606,287.069,0,325.407
   c59.606,38.338,514.013,37.403,563.17,0C1281.737,629.445,1275.742,372.298,1232.58,341.441z"/>
 <path style="fill:#252F6C;" d="M1130.426,359.976c-33.906-22.944-389.117-26.421-442.398,0c-53.282,26.421-46.823,213.453,0,241.96
   c46.824,28.506,403.783,27.811,442.398,0C1169.042,574.124,1164.333,382.92,1130.426,359.976z"/>
 <path style="fill:#FFFFFF;" d="M813.925,562.861c8.184,0,13.582-6.52,14.191-14.192c3.642-45.868,4.251-92.084,4.802-138.08
   c0.219-18.271-28.165-18.282-28.384,0c-0.551,45.996-1.159,92.212-4.802,138.08C799.126,556.32,806.691,562.861,813.925,562.861z"/>
 <path style="fill:#FFFFFF;" d="M1098.218,562.861c8.184,0,13.583-6.52,14.192-14.192c3.642-45.868,4.251-92.084,4.802-138.08
   c0.219-18.271-28.165-18.282-28.384,0c-0.552,45.996-1.16,92.212-4.802,138.08C1083.419,556.32,1090.984,562.861,1098.218,562.861z"
   />
 <path style="fill:#47BCCA;" d="M925.57,584.427c8.519,3.365,18.009,5.001,27.505,5.006c13.011-0.017,26.077-3.056,36.617-9.588
   c5.258-3.272,9.881-7.454,13.36-12.601c3.481-5.138,5.769-11.242,6.404-18.04c0.294-3.122-1.997-5.891-5.118-6.186
   c-3.121-0.295-5.89,1.996-6.186,5.118c-0.475,4.951-2.054,9.108-4.508,12.752c-3.672,5.445-9.473,9.765-16.624,12.716
   c-7.131,2.95-15.538,4.48-23.946,4.475c-10.908,0.015-21.781-2.587-29.881-7.393c-4.059-2.397-7.425-5.314-9.914-8.676
   c-2.489-3.372-4.141-7.175-4.794-11.645c-0.449-3.103-3.329-5.254-6.431-4.805c-3.103,0.449-5.254,3.328-4.805,6.431v-0.001
   c0.91,6.339,3.37,12.013,6.907,16.777C909.472,575.929,917.068,581.059,925.57,584.427z"/>
 <path style="fill:#1E173A;" d="M937.778,1278.54c-73.611,0-136.037-17.939-158.162-42.818c-5.56,6.253-8.618,12.936-8.618,19.893
   c0,7.519,3.528,14.728,9.982,21.408c23.272,24.092,84.686,41.302,156.798,41.302c72.112,0,133.526-17.21,156.798-41.302
   c6.454-6.681,9.983-13.889,9.983-21.408c0-6.956-3.057-13.64-8.618-19.893C1073.816,1260.601,1011.389,1278.54,937.778,1278.54z"/>
 <path style="fill:#252F6C;" d="M1415.241,597.284V440.226c0-19.814-15.684-36.098-35.243-37.165v231.388
   C1399.558,633.381,1415.241,617.097,1415.241,597.284z"/>
 <path style="fill:#252F6C;" d="M509.004,440.226v157.058c0,19.814,15.684,36.098,35.243,37.165V403.061
   C524.688,404.128,509.004,420.412,509.004,440.226z"/>
 <path style="fill:#252F6C;" d="M748.001,887.666c-29.894-1.309-62.487,2.395-76.623,16.763c-3.975,4.04-7.282,13.467-10.011,25.442
   c-7.638,33.514-10.708,87.173-10.895,100.012c-0.057,3.867,1.016,8.702,2.895,13.896c3.797,10.497,10.893,22.451,18.643,30.862
   C668.015,1009.563,702.901,940.888,748.001,887.666z"/>
 <path style="fill:#252F6C;" d="M1206.741,1076.525c8.428-8.414,16.341-21.359,20.446-32.658c1.899-5.228,2.985-10.097,2.929-13.985
   c-0.187-12.845-3.259-66.545-10.905-100.055c-2.727-11.955-6.032-21.363-10.002-25.398c-14.47-14.708-48.293-18.259-78.752-16.679
   C1171.575,939.295,1208.208,1007.458,1206.741,1076.525z"/>
 </svg> 
    `);
  }

  public update(deltaTime: number): void {
    // Jump cooldown
    if (this.jumpCooldown > 0) {
      this.jumpCooldown -= deltaTime;
    }

    // Apply gravity
    this.velY += this.gravity;
    this.y += this.velY;

    // Check if on ground
    if (this.y >= this.groundY) {
      this.y = this.groundY;
      this.velY = 0;
      this.jumpCount = 0;
      this.state = PlayerState.RUNNING;
    } else {
      this.state = PlayerState.JUMPING;
    }

    // Animation
    this.frameTimer += deltaTime;
    if (this.frameTimer > this.frameInterval) {
      this.frameTimer = 0;
      this.frameX = (this.frameX + 1) % this.maxFrames;
    }
  }

  public render(ctx: CanvasRenderingContext2D): void {
    if (this.sprite && this.sprite.complete) {
      ctx.drawImage(this.sprite, this.x, this.y, this.width, this.height);
    } else {
      // Fallback if sprite is not loaded
      ctx.fillStyle = '#3b82f6';
      ctx.fillRect(this.x, this.y, this.width, this.height);

      // Draw eyes
      ctx.fillStyle = '#60a5fa';
      ctx.beginPath();
      ctx.arc(this.x + 20, this.y + 20, 8, 0, Math.PI * 2);
      ctx.fill();
      ctx.beginPath();
      ctx.arc(this.x + 40, this.y + 20, 8, 0, Math.PI * 2);
      ctx.fill();

      // Draw legs
      ctx.fillStyle = '#3b82f6';
      ctx.fillRect(this.x + 10, this.y + 60, 10, 20);
      ctx.fillRect(this.x + 40, this.y + 60, 10, 20);
    }
  }

  public jump(): void {
    if (this.jumpCooldown <= 0) {
      if (this.jumpCount < this.maxJumps) {
        this.velY = this.jumpForce;
        this.jumpCount++;
        this.jumpCooldown = 300; // 300ms cooldown
      }
    }
  }
}

export default Player;
